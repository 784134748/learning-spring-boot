<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE mapper
        PUBLIC '-//mybatis.org//DTD Mapper 3.0//EN'
        'http://mybatis.org/dtd/mybatis-3-mapper.dtd' >
<mapper namespace='com.yalonglee.learning.security.mapper.SysLogMapper'>

    <select id='sys_log-select' resultType='com.yalonglee.learning.security.model.SysLog' parameterType='java.util.Map'>
        select * from sys_log
        <where>
            <include refid='query_filter'/>
        </where>
        <if test='start != null'>
            LIMIT #{start},#{limit}
        </if>
    </select>

    <delete id='sys_log-delete' parameterType='java.util.Map'>
        delete from sys_log where id = #{id};
    </delete>

    <select id='sys_log-count' resultType='java.lang.Integer' parameterType='java.util.Map'>
        select count(*) from sys_log
        <where>
            <include refid='query_filter'/>
        </where>
    </select>


    <insert id='sys_log-insert' parameterType='java.util.Map' useGeneratedKeys='true' keyProperty='id'>
        insert into sys_log
        <trim prefix='(' suffix=')' suffixOverrides=','>
                <if test='id != null'>id,</if>
                <if test='type != null'>type,</if>
                <if test='targetId != null'>target_id,</if>
                <if test='oldValue != null'>old_value,</if>
                <if test='newValue != null'>new_value,</if>
                <if test='operator != null'>operator,</if>
                <if test='operateTime != null'>operate_time,</if>
                <if test='operateIp != null'>operate_ip,</if>
                <if test='status != null'>status,</if>
        </trim>
        <trim prefix='values (' suffix=')' suffixOverrides=','>
                <if test='id != null'>#{id},</if>
                <if test='type != null'>#{type},</if>
                <if test='targetId != null'>#{targetId},</if>
                <if test='oldValue != null'>#{oldValue},</if>
                <if test='newValue != null'>#{newValue},</if>
                <if test='operator != null'>#{operator},</if>
                <if test='operateTime != null'>#{operateTime},</if>
                <if test='operateIp != null'>#{operateIp},</if>
                <if test='status != null'>#{status},</if>
        </trim>
    </insert>

    <update id='sys_log-update' parameterType='java.util.Map'>
        update sys_log
        <set>
                <if test='id != null'>id = #{id},</if>
                <if test='type != null'>type = #{type},</if>
                <if test='targetId != null'>target_id = #{targetId},</if>
                <if test='oldValue != null'>old_value = #{oldValue},</if>
                <if test='newValue != null'>new_value = #{newValue},</if>
                <if test='operator != null'>operator = #{operator},</if>
                <if test='operateTime != null'>operate_time = #{operateTime},</if>
                <if test='operateIp != null'>operate_ip = #{operateIp},</if>
                <if test='status != null'>status = #{status},</if>
        </set>
        where id = #{id}
    </update>


    <sql id='query_filter'>
            <if test='id != null'>and id = #{id}</if>
            <if test='type != null'>and type = #{type}</if>
            <if test='targetId != null'>and target_id = #{targetId}</if>
            <if test='oldValue != null'>and old_value = #{oldValue}</if>
            <if test='newValue != null'>and new_value = #{newValue}</if>
            <if test='operator != null'>and operator = #{operator}</if>
            <if test='operateTime != null'>and operate_time = #{operateTime}</if>
            <if test='operateIp != null'>and operate_ip = #{operateIp}</if>
            <if test='status != null'>and status = #{status}</if>
    </sql>


</mapper>
